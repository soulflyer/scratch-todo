{"version":3,"sources":["todo_app/events.cljs"],"mappings":";AAQA,AAAA,AAACA,AAEC,AAAKC,AAAEA;AAAP,AACEC;;AAEJ,AAAA,AAACF,AAEC,AAAAG,AAAKQ;AAAL,AAAA,AAAAP,AAAAD;AAAA,AAAAE,AAAAD,AAAA,AAAA,AAASH;AAATK,AAAA,AAAAD,AAAAD,AAAA,AAAA;AAAAE,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAA,AAAAI,AAAAJ,AAAA,AAAmBM;AAAnB,AACE,AAAA,AAACC,AAAMF,AAAUC;;AAErB,AAAA,AAACZ,AAEC,AAAKW,AAAGV;AAAR,AACE,AAAA,AAACa;;AACDH;;AAEJ,AAAA,AAACI,AAEC,AAAAC,AAAKf;AAAL,AAAA,AAAAgB,AAAAD;AAAA,AAAAX,AAAAY,AAAA,AAAA,AAAQhB;AAAR,AACE,AAAA,AAACiB;;AADH,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAGiC,AAAA,AAAA,AAAA,AAACC,AACV,AAACC","names":["re_frame.core.reg_event_db","_","todo-app.db/default-db","p__61326","vec__61327","cljs.core.nth","map__61330","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","db","response","cljs.core.assoc","js/console.error","re_frame.core.reg_event_fx","p__61332","vec__61333","js/console.info","ajax.core/json-response-format","ajax.core/json-request-format"],"sourcesContent":["(ns todo-app.events\n  (:require\n    [ajax.core :as ajax]\n    [day8.re-frame.http-fx]\n    [re-frame.core :as re-frame]\n    [re-frame.db :refer [app-db]]\n    [todo-app.db :as db]))\n\n(re-frame/reg-event-db\n  ::initialize-db\n  (fn [_ _]\n    db/default-db))\n\n(re-frame/reg-event-db\n  ::add-todos->db\n  (fn [db [_ {:keys [response]}]]\n    (assoc db :todos response)))\n\n(re-frame/reg-event-db\n  ::failure\n  (fn [db _]\n    (js/console.error \"Something is wrong!\")\n    db))\n\n(re-frame/reg-event-fx\n  ::fetch-todos!\n  (fn [_ [_]]\n    (js/console.info \"Fetching todos!\")\n    {:http-xhrio {:uri \"http://localhost:3000/api/todos\"\n                  :response-format (ajax/json-response-format {:keywords? true})\n                  :format (ajax/json-request-format)\n                  :on-success [::add-todos->db]\n                  :on-failure [::failure]}}))\n"]}